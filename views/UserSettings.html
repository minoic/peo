
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{.webApplicationName}} ç”¨æˆ·æ§åˆ¶å°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{template "tpls/perfectCSS.html" .}}
</head>

<body class="overflow-hidden">
{{template "tpls/navbar.html" .}}
<div id="overlay" class="transparent"></div>
<div id="wrapper" class="preload sidebar-mini">
    {{template "tpls/sidebar.html" .}}
    <!-- main-container -->
    <div id="main-container">
        <div class="padding-md">
            <div class="row">
                <div class="col-md-6">
                    <div class="panel panel-default">
                        <form class="form-horizontal form-border no-margin" id="basic-constraint" data-validate="parsley" novalidate="" method="post" action="/user-settings/change-password">
                            <div class="panel-heading">
                                ä¿®æ”¹å¯†ç 
                            </div>
                            <div class="panel-body">
                                {{.xsrfData}}
                                <div class="form-group">
                                    <label class="control-label col-lg-3">æ—§å¯†ç </label>
                                    <div class="col-lg-9">
                                        <input type="password" class="form-control input-sm parsley-validated" placeholder="è¾“å…¥æ‚¨è´¦å·åŸæ¥çš„å¯†ç " name="oldPassword">
                                    </div><!-- /.col -->
                                </div><!-- /form-group -->
                                <div class="form-group">
                                    <label class="control-label col-lg-3">æ–°å¯†ç </label>
                                    <div class="col-lg-9">
                                        <input type="password" placeholder="è¾“å…¥æ–°å¯†ç " class="form-control input-sm" name="newPassword">
                                        <div class="seperator"></div>
                                        <input type="password" placeholder="ç¡®è®¤æ–°å¯†ç " class="form-control input-sm" name="confirmPassword">
                                    </div><!-- /.col -->
                                </div><!-- /form-group -->
                            </div>
                            {{if .hasError}}
                                <div class="alert alert-danger">
                                    <strong>ä¿®æ”¹å¤±è´¥ï¼</strong> {{.hasErrorText}}
                                </div>
                            {{end}}
                            <div class="panel-footer">
                                <button type="submit" class="btn btn-primary">ç¡®è®¤ä¿®æ”¹</button>
                            </div>
                        </form>
                    </div><!-- /panel -->
                </div><!-- /.col-->
                <div class="col-md-6">
                    <div class="panel panel-default">
                        <form class="form-horizontal form-border no-margin" id="type-constraint" data-validate="parsley" novalidate="" method="post" action="/user-settings/change-email">
                            <div class="panel-heading">
                                ä¿®æ”¹ç»‘å®šé‚®ç®±
                            </div>
                            <div class="panel-body">
                                {{.xsrfData}}
                                <div>
                                    <label class="control-label col-lg-3">æ–°é‚®ç®±</label>
                                    <div class="col-lg-9 input-group">
                                        <input id="email" name="email" type="text" class="form-control" placeholder="è¾“å…¥æ‚¨è¦ä¿®æ”¹çš„æ–°é‚®ç®±">
                                        <span class="input-group-btn">
                                            <button id="send_email" class="btn btn-default tooltip-test" data-toggle="tooltip" data-placement="top" data-original-title="æ¯å…­åç§’åªèƒ½å‘é€ä¸€æ¬¡" type="button" onclick="send()"><small id="cooldown">å‘é€éªŒè¯ç ğŸ‘</small></button>
                                            </span>
                                    </div><!-- /.col -->
                                </div><!-- /form-group -->
                                <script type="text/javascript" async="async">
                                    function send() {
                                        $.get({{.webHostName}}+"/user-settings/change-email/"+$("#email").val());
                                        $("#send_email").attr("disabled","disabled");
                                        var second = 60;
                                        var origin_text = $("#cooldown").text()
                                        var intervalObj = setInterval(
                                            function () {
                                                $("#cooldown").text(origin_text+ "(" + second + ")");
                                                if(second==0){
                                                    $("#cooldown").text(origin_text);
                                                    $("#send_email").removeAttr("disabled")
                                                    clearInterval(intervalObj);
                                                }
                                                second--;
                                            },1000
                                        )
                                    }
                                </script>
                                <div class="form-group">
                                    <label class="control-label col-lg-3">éªŒè¯ç </label>
                                    <div class="col-lg-9">
                                        <input type="text" class="form-control input-sm parsley-validated" placeholder="è¾“å…¥å‘é€åˆ°æ‚¨æ–°é‚®ç®±é‡Œçš„éªŒè¯ç " name="captcha">
                                    </div><!-- /.col -->
                                </div><!-- /form-group -->
                            </div>
                            {{if .hasError2}}
                                <div class="alert alert-danger">
                                    <strong>ä¿®æ”¹å¤±è´¥ï¼</strong> {{.hasErrorText2}}
                                </div>
                            {{end}}
                            <div class="panel-footer">
                                <button type="submit" class="btn btn-primary">ç¡®è®¤ä¿®æ”¹</button>
                            </div>
                        </form>
                    </div><!-- /panel -->
                </div><!-- /.col-->
            </div>
        </div>
    </div>
    <!-- /main-container -->
</div><!-- /wrapper -->

<a href="" id="scroll-to-top" class="hidden-print"><i class="fa fa-chevron-up"></i></a>
<!-- Logout confirmation -->
<div class="custom-popup width-100" id="logoutConfirm">
    <div class="padding-md">
        <h4 class="m-top-none"> ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿæ‚¨å°†éœ€è¦é‡æ–°ç™»å½•æ‰èƒ½è®¿é—®éƒ¨åˆ†å†…å®¹ã€‚</h4>
    </div>

    <div class="text-center">
        <a class="btn btn-danger m-right-sm" onclick="logout()" href="/">ç™»å‡º</a>
        <script type="text/javascript">
            function logout() {
                console.log($.cookie());
                $.removeCookie('beegosessionID');
            }
        </script>
    </div>
</div>
{{template "tpls/perfectJS.html" .}}
<script src='../static/perfect/js/jquery.cookie.min.js'></script>
</body>
</html>
